<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      Weld: Weld 3.1.0.Final
    </title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="Weld 3.1.0.Final released" name="description">
    <link href="/images/weld_icon_32x.ico" rel="shortcut icon" type="image/x-icon">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//static.jboss.org/css/tabzilla.css" media="screen" rel="stylesheet" type="text/css">
    <link href="http://weld.cdi-spec.org/stylesheets/styles.css" rel="stylesheet" type="text/css">
    <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="//static.jboss.org/js/_jbossorg-tabzilla.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
    <link href="http://weld.cdi-spec.org/news.atom" rel="alternate" type="application/atom+xml">
    <link href="//cdn.jsdelivr.net/highlight.js/8.9.1/styles/hybrid.min.css" rel="stylesheet">
    <script src="//cdn.jsdelivr.net/highlight.js/8.9.1/highlight.min.js" type="text/javascript"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2 col-sm-3">
          <div class="sidebar-nav">
            <div class="navbar navbar-default" role="navigation">
              <div class="navbar-header">
                <button ="button" class="navbar-toggle" data-target=".sidebar-navbar-collapse" data-toggle="collapse">
                  <span class="sr-only">
                    Toggle navigation
                  </span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a ="#" class="visible-xs navbar-brand">
                  <img alt="Weld Logo" src="/images/weld_logo_100x.png">
                </a>
              </div>
              <div class="collapse navbar-collapse sidebar-navbar-collapse">
                <ul class="nav navbar-nav">
                  <li>
                    <a href="/">
                      <i class="fa fa-home"></i>
                      &nbsp;Home
                    </a>
                  </li>
                  <li>
                    <a href="/download">
                      <i class="fa fa-download"></i>
                      &nbsp;Download
                    </a>
                  </li>
                  <li>
                    <a href="/news">
                      <i class="fa fa-newspaper-o"></i>
                      &nbsp;News
                    </a>
                  </li>
                  <li>
                    <a href="https://issues.jboss.org/projects/WELD?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page" target="_blank">
                      <i class="fa fa-road"></i>
                      &nbsp;Road Map
                    </a>
                  </li>
                  <li>
                    <a href="/documentation">
                      <i class="fa fa-book"></i>
                      &nbsp;Docs &amp; FAQ
                    </a>
                  </li>
                  <li>
                    <a href="/news/tags/tips">
                      <i class="fa fa-lightbulb-o"></i>
                      &nbsp;Tips and Tricks
                    </a>
                  </li>
                  <li>
                    <a href="/community">
                      <i class="fa fa-group"></i>
                      &nbsp;Community
                    </a>
                  </li>
                  <li>
                    <a href="http://github.com/weld" target="_blank">
                      <i class="fa fa-github-alt"></i>
                      &nbsp;Source Code
                    </a>
                  </li>
                  <li>
                    <a href="https://issues.jboss.org/browse/WELD#selectedTab=com.atlassian.jira.plugin.system.project%3Asummary-panel" target="_blank">
                      <i class="fa fa-tasks"></i>
                      &nbsp;Bug Tracker
                    </a>
                  </li>
                  <li>
                    <a href="https://twitter.com/jbossweld" target="_blank">
                      <i class="fa fa-twitter"></i>
                      &nbsp;Follow @jbossweld
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-10 col-sm-9">
          <div class="row hidden-xs">
            <div class="dropup">
              <div id="ajbossproject">
                A JBoss Project
              </div>
              <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
              <script>
                window.addEventListener('load', function() {renderTabzilla("Weld", "weld", false )}, false);
              </script>
            </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <a href="/">
                <img alt="Weld Logo" class="hidden-xs weld-home-logo" src="/images/weld_logo_450x.png">
              </a>
            </div>
            <div class="col-md-8">
              <img alt="CDI tagcloud" class="hidden-xs hidden-sm cdi-background" src="/images/CDIbackground.png">
            </div>
          </div>
          <div class="row content-wrapper">
            <div class="col-md-12">
              <div class="post">
                <h1>
                  Weld 3.1.0.Final
                  <a href="http://weld.cdi-spec.org/news.atom" title="Subscribe to Weld news">
                    <i class="fa fa-rss"></i>
                  </a>
                </h1>
                <div class="news-date news-boxed">
                  2019-2-6
                  &nbsp;
                  <span class="tags">
                    <i class="fa fa-tags"></i>
                    <a href="/news/tags/release">release</a>
                  </span>
                  &nbsp;
                  <i class="fa fa-pencil"></i>
                  Matej Novotny
                </div>
                <p></p>
                <div class="content">
                  <div class="paragraph">
                  <p>Weld 3.1.0.Final and Weld API 3.1.Final are now up for grabs. What&#8217;s in it for you?</p>
                  </div>
                  <div class="paragraph">
                  <p>There are quite a few new things in the mix - <code>InterceptionFactory</code> improvements, new API clases and methods, improvements to class defining for integrators in preparation for JDK 12.
                  We now also support CDI context propagation between threads; there is a whole new SPI that allows users and/or frameworks to propagate request, session or conversation contexts.
                  Last but no least, there are bug fixes, so let&#8217;s get right into it!</p>
                  </div>
                  <div class="admonitionblock note">
                  <table>
                  <tr>
                  <td class="icon">
                  <div class="title">Note</div>
                  </td>
                  <td class="content">
                  Integrators (WildFly, Liberty, GlassFish, &#8230;&#8203;) will have to adjust to the changes made in SPI. Those are, most notably, the removal of long deprecated methods (<a href="https://issues.jboss.org/browse/WELD-2558" target="_blank" rel="noopener">WELD-2558</a>) and reworked <code>ProxyServices</code> which now delegate class defining responsibility to the integrator (<a href="https://issues.jboss.org/browse/WELD-2556" target="_blank" rel="noopener">WELD-2556</a>). This is crucial for Weld to operate on newer JDKs (12) and while Weld will work with the old approach for now, we will eventually fully swap to this new SPI.
                  </td>
                  </tr>
                  </table>
                  </div>
                  <div class="paragraph">
                  <p>Fixes and improvements:</p>
                  </div>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>Weld API/SPI</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>Added API to allow for CDI context propagation between threads (<a href="https://issues.jboss.org/browse/WELD-2497" target="_blank" rel="noopener">WELD-2497</a>)</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>New API class was introduced (<code>WeldAlterableContext</code>), this class offers methods to manipulate context state</p>
                  </li>
                  <li>
                  <p>You can now propagate <code>Request</code>, <code>Session</code> and <code>Conversation</code> contexts between threads as they all implement <code>WeldAlterableContext</code></p>
                  </li>
                  <li>
                  <p>This comes with certain limitations and is mostly designed for frameworks which would do this for you (such as MicroProfile Concurrency) but anyone can use it</p>
                  </li>
                  <li>
                  <p>For more information, please glance at <a href="http://docs.jboss.org/weld/reference/latest/en-US/html_single/#_propagating_built_in_contexts">this part of Weld documentation</a></p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p><code>WeldManager</code>, providing extra methods over what <code>BeanManager</code> offers, is now an injectable bean (<a href="https://issues.jboss.org/browse/WELD-2538" target="_blank" rel="noopener">WELD-2538</a>)</p>
                  </li>
                  <li>
                  <p><code>WeldManager</code> now offers new util methods allowing you to easily grab active contexts</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>This is mainly for the purpose of context propagation as it also allows you to grab all active contexts that support it</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p><code>WeldManager</code> can now be used to check if any given context is active without having to care about exceptions (<a href="https://issues.jboss.org/browse/WELD-2537" target="_blank" rel="noopener">WELD-2537</a>)</p>
                  </li>
                  <li>
                  <p>Added new SPI for class defining, deprecated old approach in <code>ProxyServices</code> (<a href="https://issues.jboss.org/browse/WELD-2556" target="_blank" rel="noopener">WELD-2556</a>)</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>Integrators will have to implement this new API to be able to operate on JDK 12+</p>
                  </li>
                  <li>
                  <p>Weld now delegates class defining to integrators in order to avoid having to crack open <code>ClassLoader</code> methods</p>
                  </li>
                  <li>
                  <p>Previously, integrators provided <code>ClassLoader</code> instance which Weld then used to invoke <code>defineClass()</code> methods</p>
                  </li>
                  <li>
                  <p>We now ask integrators to invoke those methods themselves while providing them with all the necessary bits for doing so</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p>Remove deprecated parts of API/SPI (<a href="https://issues.jboss.org/browse/WELD-2558" target="_blank" rel="noopener">WELD-2558</a>)</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>Lots of unused and long deprecated methods were removed, should have no effect on code as those weren&#8217;t used anyway (most of them since Weld 3.0.0)</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p>Weld Core</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>Weld will now log a <code>WARNING</code> if you try to register an invalid qualifier (<a href="https://issues.jboss.org/browse/WELD-2522" target="_blank" rel="noopener">WELD-2522</a>)</p>
                  </li>
                  <li>
                  <p>You can now use <code>InterceptionFactory</code> with an interface as a parameter (<a href="https://issues.jboss.org/browse/WELD-2550" target="_blank" rel="noopener">WELD-2550</a>, <a href="https://issues.jboss.org/browse/WELD-2533" target="_blank" rel="noopener">WELD-2533</a>)</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>This means the proxy class will be based off an interface which is by definition always proxyable</p>
                  </li>
                  <li>
                  <p>You can therefore even supply an unproxyable implementation and it will still work</p>
                  </li>
                  <li>
                  <p>Note that this is experimental feature with some limitations to it, see <a href="http://docs.jboss.org/weld/reference/latest/en-US/html_single/#_loosening_the_limitations_of_literal_interceptionfactory_literal">Weld docs</a> for more details</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p>Correct atomic behaviour in <code>RequestContextController</code> (<a href="https://issues.jboss.org/browse/WELD-2536" target="_blank" rel="noopener">WELD-2536</a>)</p>
                  </li>
                  <li>
                  <p>Fix rare race condition in <code>ConcurrentValidator</code> (<a href="https://issues.jboss.org/browse/WELD-2545" target="_blank" rel="noopener">WELD-2545</a>)</p>
                  </li>
                  <li>
                  <p>Small correction to interceptor resolution when they have no bindings (<a href="https://issues.jboss.org/browse/WELD-2521" target="_blank" rel="noopener">WELD-2521</a>)</p>
                  </li>
                  <li>
                  <p>Enforce consistent behaviour between <code>AnnotatedType</code> and <code>WithAnnotations</code> in regards to default methods (<a href="https://issues.jboss.org/browse/WELD-2551" target="_blank" rel="noopener">WELD-2551</a>)</p>
                  </li>
                  <li>
                  <p>All proxy-specific methods added by Weld now have more complex names to avoid (very rare) method clashes (<a href="https://issues.jboss.org/browse/WELD-2508" target="_blank" rel="noopener">WELD-2508</a>)</p>
                  </li>
                  <li>
                  <p>Lower logging level of <code>InterceptorLogger.unableToDetermineInterceptedBean()</code> from <code>WARN</code> to <code>INFO</code> (<a href="https://issues.jboss.org/browse/WELD-2546" target="_blank" rel="noopener">WELD-2546</a>)</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p>Weld SE</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>You can now extend the set of bean defining annotations in Weld SE (<a href="https://issues.jboss.org/browse/WELD-2523" target="_blank" rel="noopener">WELD-2523</a>)</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>This is handy for when you have discovery on and want custom beans automatically picked up while still avoiding the <code>all</code> discovery mode</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p>Fix bug in handling JAR dependencies added onto classpath where you could accidentally add more packages than desired (<a href="https://issues.jboss.org/browse/WELD-2535" target="_blank" rel="noopener">WELD-2535</a>)</p>
                  </li>
                  <li>
                  <p>Correct <code>ALLOW_OPTIMIZED_CLEANUP</code> configuration key value (<a href="https://issues.jboss.org/browse/WELD-2547" target="_blank" rel="noopener">WELD-2547</a>)</p>
                  </li>
                  <li>
                  <p>When running with <code>SecurityManager</code> enabled, Weld will now refuse to use <code>ForkJoinPool</code> for startup and will pick different pool instead (<a href="https://issues.jboss.org/browse/WELD-2517" target="_blank" rel="noopener">WELD-2517</a>)</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p>Probe development tool</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>Make sure <code>ProbeExtension</code> has priority over any other existing extensions (<a href="https://issues.jboss.org/browse/WELD-2524" target="_blank" rel="noopener">WELD-2524</a>)</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  <li>
                  <p>Other</p>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>Stabilize testsuite and make sure dependencies are EE 8 based (<a href="https://issues.jboss.org/browse/WELD-2519" target="_blank" rel="noopener">WELD-2519</a>, <a href="https://issues.jboss.org/browse/WELD-2553" target="_blank" rel="noopener">WELD-2553</a>)</p>
                  </li>
                  <li>
                  <p>Documentation has been updated to reflects EE 8 versions of servers (<a href="https://issues.jboss.org/browse/WELD-2529" target="_blank" rel="noopener">WELD-2529</a>)</p>
                  </li>
                  <li>
                  <p>Documented all changes coming to Weld API in 3.1 update (<a href="https://issues.jboss.org/browse/WELD-2540" target="_blank" rel="noopener">WELD-2540</a>)</p>
                  </li>
                  <li>
                  <p>Re-enable SpotBugs code quality checking on JDK 11+ (<a href="https://issues.jboss.org/browse/WELD-2544" target="_blank" rel="noopener">WELD-2544</a>)</p>
                  </li>
                  <li>
                  <p>Upgraded WildFly Arquillian adapter to 2.1.1.Final (<a href="https://issues.jboss.org/browse/WELD-2543" target="_blank" rel="noopener">WELD-2543</a>)</p>
                  </li>
                  <li>
                  <p>Revisit testing on Jetty (<a href="https://issues.jboss.org/browse/WELD-2528" target="_blank" rel="noopener">WELD-2528</a>)</p>
                  </li>
                  <li>
                  <p>We are now regularly testing with JDK 11 and looking into JDK 12 testing</p>
                  </li>
                  </ul>
                  </div>
                  </li>
                  </ul>
                  </div>
                  <div class="sect1">
                  <h2 id="_wildfly_patch">WildFly Patch</h2>
                  <div class="sectionbody">
                  <div class="paragraph">
                  <p>This time around, the <a href="http://download.jboss.org/weld/3.1.0.Final/wildfly-15.0.1.Final-weld-3.1.0.Final-patch.zip" target="_blank" rel="noopener">patch for WildFly 15.0.1.Final</a> is available.</p>
                  </div>
                  <div class="paragraph">
                  <p>If you’re not familiar with patching WildFly, check the <a href="/documentation/#12">FAQ</a>.</p>
                  </div>
                  <div class="paragraph">
                  <p>&#91; <a href="/download/">Download</a> &#93;
                  &#91; <a href="http://docs.jboss.org/weld/reference/3.1.0.Final/en-US/html/" target="_blank" rel="noopener">Documentation</a> &#93;
                  &#91; <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310891&amp;version=12339977" target="_blank" rel="noopener">Release notes</a> &#93;</p>
                  </div>
                  </div>
                  </div>
                </div>
                
                            <div id="disqus_thread"></div>
                            <script type="text/javascript">
                            var disqus_shortname = 'weld-cdi';
                            var disqus_url = "http://weld.cdi-spec.org/news/2019/02/06/weld-310Final/";
                            var disqus_developer = null;
                            var disqus_identifier = "7b7844a6989691dada3e14bf78b3327d7b808118";
                            (function() {
                              var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
                              dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                              (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
                            })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=weld-cdi">comments powered by Disqus.</a></noscript>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="row">
        <div class="container" id="companyfooter">
          <div class="redhatlogo" style="text-align:center;">
            <div class="logospacer" style="height:10px;"></div>
            <a href="http://www.redhat.com/">
              <img src="http://static.jboss.org/theme/images/common/redhat_logo.png">
            </a>
          </div>
        </div>
      </div>
    </footer>
  </body>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" type="text/javascript"></script>
  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount','UA-45187401-1']);
  _gaq.push(['_trackPageview']);
  (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script>
  <script>
    $(document).ready(function() {
      $('#toggle_menu').click(function(){
        $("#mobile_menu").toggle();
      });
    });
  </script>
</html>
