<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>
Weld: News
</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Latest news about Weld." name="description">
<link href="/images/weld_icon_32x.ico" rel="shortcut icon" type="image/x-icon">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="//static.jboss.org/css/tabzilla.css" media="screen" rel="stylesheet" type="text/css">
<link href="https://weld.cdi-spec.org/stylesheets/styles.css" rel="stylesheet" type="text/css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="//static.jboss.org/js/_jbossorg-tabzilla.js" type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
<![endif]-->
<link href="https://weld.cdi-spec.org/news.atom" rel="alternate" type="application/atom+xml">
<link href="//cdn.jsdelivr.net/highlight.js/8.9.1/styles/hybrid.min.css" rel="stylesheet">
<script src="//cdn.jsdelivr.net/highlight.js/8.9.1/highlight.min.js" type="text/javascript"></script>
<script>
hljs.initHighlightingOnLoad();
</script>
</head>
<body>
<div class="container-fluid">
<div class="row">
<div class="col-md-2 col-sm-3">
<div class="sidebar-nav">
<div class="navbar navbar-default" role="navigation">
<div class="navbar-header">
<button ="button" class="navbar-toggle" data-target=".sidebar-navbar-collapse" data-toggle="collapse">
<span class="sr-only">
Toggle navigation
</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a ="#" class="visible-xs navbar-brand">
<img alt="Weld Logo" src="/images/weld_logo_100x.png">
</a>
</div>
<div class="collapse navbar-collapse sidebar-navbar-collapse">
<ul class="nav navbar-nav">
<li>
<a href="/">
<i class="fa fa-home"></i>
&nbsp;Home
</a>
</li>
<li>
<a href="/download">
<i class="fa fa-download"></i>
&nbsp;Download
</a>
</li>
<li>
<a href="/news">
<i class="fa fa-newspaper-o"></i>
&nbsp;News
</a>
</li>
<li>
<a href="https://issues.jboss.org/projects/WELD?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page" target="_blank">
<i class="fa fa-road"></i>
&nbsp;Road Map
</a>
</li>
<li>
<a href="/documentation">
<i class="fa fa-book"></i>
&nbsp;Docs &amp; FAQ
</a>
</li>
<li>
<a href="/news/tags/tips">
<i class="fa fa-lightbulb-o"></i>
&nbsp;Tips and Tricks
</a>
</li>
<li>
<a href="/community">
<i class="fa fa-group"></i>
&nbsp;Community
</a>
</li>
<li>
<a href="http://github.com/weld" target="_blank">
<i class="fa fa-github-alt"></i>
&nbsp;Source Code
</a>
</li>
<li>
<a href="https://issues.jboss.org/browse/WELD#selectedTab=com.atlassian.jira.plugin.system.project%3Asummary-panel" target="_blank">
<i class="fa fa-tasks"></i>
&nbsp;Bug Tracker
</a>
</li>
<li>
<a href="https://twitter.com/jbossweld" target="_blank">
<i class="fa fa-twitter"></i>
&nbsp;Follow @jbossweld
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-md-10 col-sm-9">
<div class="row hidden-xs">
<div class="dropup">
<div id="ajbossproject">
A JBoss Project
</div>
<a class="tabnav-closed" href="#" id="tab">Red Hat</a>
<script>
window.addEventListener('load', function() {renderTabzilla("Weld", "weld", false )}, false);
</script>
</div>
</div>
<div class="row">
<div class="col-md-4">
<a href="/">
<img alt="Weld Logo" class="hidden-xs weld-home-logo" src="/images/weld_logo_450x.png">
</a>
</div>
<div class="col-md-8">
<img alt="CDI tagcloud" class="hidden-xs hidden-sm cdi-background" src="/images/CDIbackground.png">
</div>
</div>
<div class="row content-wrapper">
<div class="col-md-12">
<h1>
News
<a href="http://weld.cdi-spec.org/news.atom">
<i class="fa fa-rss"></i>
</a>
</h1>
<div class="post">
<h2>
<a href="/news/2015/09/08/weld-team-changes/">Weld team changes</a>
</h2>
<div class="news-date news-boxed">
2015-9-8
&nbsp;
<span class="tags">
<i class="fa fa-tags"></i>
<a href="/news/tags/team">team</a>
</span>
&nbsp;
<i class="fa fa-pencil"></i>
Jozef Hartinger
</div>
<p></p>
<div class="content">
<div class="paragraph">
<p>I am pleased to announce a couple of changes coming to the Weld team:</p>
</div>
<div class="paragraph">
<p>First of all, <a href="https://developer.jboss.org/people/mkouba">Martin</a> will be taking over leadership of the project.
Martin has proven himself to be an excellent engineer over all the years and I am happy that I can leave the project in his hands.
His primary task is going to be leading the project towards the Weld 3 milestone.</p>
</div>
<div class="paragraph">
<p>Secondly, I will be moving to work temporarily on a different project.
I truly enjoyed working on Weld and with the CDI community.
Now after almost 4 years on the project I was given an exciting opportunity which I decided to pursuit.</p>
</div>
<div class="paragraph">
<p>Last but not least, Matěj Novotný is joining the team as a quality engineer.
He’s going to work on expanding our testsuites and making sure Weld releases do not break anything :-)</p>
</div>
</div>
<hr>
</div>
<div class="post">
<h2>
<a href="/news/2015/08/05/weld-300Alpha12/">Weld 3.0.0.Alpha12 - CDI 2.0 EDR1 Reference Implementation!</a>
</h2>
<div class="news-date news-boxed">
2015-8-5
&nbsp;
<span class="tags">
<i class="fa fa-tags"></i>
<a href="/news/tags/release">release</a>
, 
<a href="/news/tags/cdi2">cdi2</a>
</span>
&nbsp;
<i class="fa fa-pencil"></i>
Martin Kouba
</div>
<p></p>
<div class="content">
<div class="paragraph">
<p>Weld 3.0.0.Alpha12 has been released. Compared to previous alpha releases this is an important milestone - it&#8217;s a reference implementation of <a href="http://docs.jboss.org/cdi/spec/2.0.EDR1/cdi-spec.html">CDI 2.0 Early Draft</a> (EDR1). You can read more about CDI 2.0 EDR1 on the official blog: <a href="http://www.cdi-spec.org/news/2015/07/03/CDI-2_0-EDR1-released/">CDI 2.0 Early Draft Review 1 released</a>.</p>
</div>
<div class="sect1">
<h2 id="_bootstrapping_a_cdi_container_in_java_se">Bootstrapping a CDI container in Java SE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Starting a CDI container is now really that easy:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">public static void main(String... args) {&#x000A;    try(CDI&lt;Object&gt; cdi = CDI.getCDIProvider().initialize()) {&#x000A;        ComputingService service = cdi.select(ComputingService.class).get();&#x000A;        service.compute();&#x000A;    }&#x000A;}</code></pre>
</div>
</div>
<div class="paragraph">
<p><code>javax.enterprise.inject.spi.CDI</code> now implements <code>AutoCloseable</code> and can therefore be used in a <code>try-with-resources</code> block.</p>
</div>
<div class="paragraph">
<p>Note that the specification of the bean discovery process in Java SE is not finished yet. Therefore, bean archives which don&#8217;t contain a beans.xml file are not supported. The main reason is that we don&#8217;t want to implement a feature which is being discussed and will likely undergo some important changes. Nevertheless, the feature will be implemented in one of the next alpha versions.</p>
</div>
<div class="sect2">
<h3 id="_weld_se_bootstrap_api">Weld SE bootstrap API</h3>
<div class="paragraph">
<p>How does it compare to Weld SE bootstrap API? Weld has provided support for the Java SE environment for a long time. Recently, the <code>org.jboss.weld.environment.se.Weld</code> class was turned into a powerful builder which allows to configure the Weld container before it is initialized.</p>
</div>
<div class="paragraph">
<p>Typical usage of the Weld SE API looks like this:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">try (WeldContainer container = new Weld().initialize()) {&#x000A;    ComputingService service = container.select(ComputingService.class).get();&#x000A;    service.compute();&#x000A;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>This looks very similar to CDI SE, right? However, there are several advanced feratures available:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>automatic scanning can be disabled, classes or packages can be selected explicitly</p>
<div class="ulist">
<ul>
<li>
<p><code>WeldContainer container = new Weld().disableDiscovery().beanClasses(Foo.class, Bar.class).alternatives(Bar.class).interceptors(FooInterceptor.class).initialize();</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>WeldContainer allows to fire events easily</p>
<div class="ulist">
<ul>
<li>
<p><code>container.event().select(Bar.class).fire(new Bar());</code></p>
</li>
</ul>
</div>
</li>
<li>
<p>Weld-specific <a href="http://docs.jboss.org/weld/reference/latest/en-US/html/configure.html#_weld_configuration">configuration options</a> can be specified using the builder</p>
</li>
<li>
<p>it is possible to start multiple independent Weld instances (specification does not require this)</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>See also <a href="http://weld.cdi-spec.org/news/2015/04/21/weld-300Alpha8/">Weld 3.0.0.Alpha8 announcement</a> for more information.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_asynchronous_events">Asynchronous Events</h2>
<div class="sectionbody">
<div class="paragraph">
<p>An experimental support of asynchronous events is implemented in Weld since 3.0.0.Alpha3. However, in this release the API was aligned with CDI 2.0 EDR1:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">class OrderProcessor {&#x000A;&#x000A;    @Inject Event&lt;Order&gt; orderEvent;&#x000A;&#x000A;    public void process(Order order) {&#x000A;        orderEvent.fireAsync(order).thenAccept((o)-&gt;System.out.println("Asynchronous processing finished: " + o.getId()));&#x000A;    }&#x000A;&#x000A;    public void processingOrder(@Observes Order event) {&#x000A;        // This observer is notified synchronously, before the fireAsync() method returns&#x000A;    }&#x000A;&#x000A;    public void asyncProcessingOrder(@ObservesAsync Order event) {&#x000A;        // This observer is notified asynchronously, in a different thread&#x000A;    }&#x000A;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are few important things to notice:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the event was triggered with <code>fireAsync()</code></p>
</li>
<li>
<p>the asynchronous observer is defined by <code>@ObservesAsync</code></p>
<div class="ulist">
<ul>
<li>
<p>this is required because of backward compatibilty with previous versions of CDI, see also <a href="http://www.cdi-spec.org/news/2015/07/03/CDI-2_0-EDR1-released/#_why_this_double_activation_is_needed">Why this double activation is needed?</a></p>
</li>
</ul>
</div>
</li>
<li>
<p>synchronous observers defined by <code>@Observes</code> are also notified!</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>To sum it up:</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 33.3333%;">
<col style="width: 33.3333%;">
<col style="width: 33.3334%;">
</colgroup>
<thead>
<tr>
<th class="tableblock halign-left valign-top">Event method</th>
<th class="tableblock halign-left valign-top"><code>@Observes</code> notified</th>
<th class="tableblock halign-left valign-top"><code>@ObservesAsync</code> notified</th>
</tr>
</thead>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fire()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, in the same thread</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">no</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"><code>fireAsync()</code></p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, in the same thread</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">yes, in a different thread</p></td>
</tr>
</tbody>
</table>
<div class="sect2">
<h3 id="_observers_spi_changes">Observers SPI Changes</h3>
<div class="paragraph">
<p><code>javax.enterprise.inject.spi.ObserverMethod</code> now extends <code>javax.enterprise.inject.spi.Prioritized</code> and overrides the <code>ObserverMethod.getPriority()</code> method which is used to determine the notification order in which the event observer methods are invoked. <code>Prioritized</code> interface is currently only used for observers. However, the Weld team is working on a prototype where <code>Prioritized</code> can be used to globally select/enable custom alternative beans, interceptors and decorators, see also <a href="https://issues.jboss.org/browse/WELD-2000">WELD-2000</a>.</p>
</div>
<div class="paragraph">
<p>Furthermore, <code>ObserverMethod.isAsync()</code> method was added to determine whether an observer method is asynchronous or not.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_wildfly_patch">WildFly Patch</h2>
<div class="sectionbody">
<div class="paragraph">
<p>As usual, a <a href="http://download.jboss.org/weld/3.0.0.Alpha12/wildfly-10.0.0.Alpha6-weld-3.0.0.Alpha12-patch.zip">patch for WildFly</a> is available. This patch not only upgrades Weld within an existing WildFly instance but also upgrades CDI API to 2.0 EDR1. This time the target platform is <strong>WildFly 10.0.0.Alpha6</strong>.  If you’re not familiar with patching WildFly, check <a href="http://blog.eisele.net/2015/02/playing-with-weld-probe-see-all-of-your.html">Markus&#8217;s tutorial</a>.</p>
</div>
<div class="paragraph">
<p>&#91; <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/package-frame.html">Experimental API documentation</a> &#93;
&#91; <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310891&amp;version=12327471">Release notes</a> &#93;
&#91; <a href="http://download.jboss.org/weld/3.0.0.Alpha12/weld-3.0.0.Alpha12.zip">Distribution</a> &#93;
&#91; <a href="http://download.jboss.org/weld/3.0.0.Alpha12/wildfly-10.0.0.Alpha6-weld-3.0.0.Alpha12-patch.zip">Patch for Wildfly 10 Alpha</a>
&#93;</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div class="post">
<h2>
<a href="/news/2015/04/21/weld-300Alpha8/">Weld 3.0.0.Alpha8</a>
</h2>
<div class="news-date news-boxed">
2015-4-21
&nbsp;
<span class="tags">
<i class="fa fa-tags"></i>
<a href="/news/tags/release">release</a>
, 
<a href="/news/tags/cdi2">cdi2</a>
</span>
&nbsp;
<i class="fa fa-pencil"></i>
Jozef Hartinger
</div>
<p></p>
<div class="content">
<div class="paragraph">
<p>Weld 3.0.0.Alpha8 has been released.
The main change is the enhanced API for using Weld in Java SE environment. In addition, this release comes with several weld-probe improvements.</p>
</div>
<div class="sect1">
<h2 id="_enhanced_api_for_weld_se">Enhanced API for Weld SE</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Weld has provided <a href="http://docs.jboss.org/weld/reference/latest-2.2/en-US/html/environments.html#_java_se">support for the Java SE environment</a> for a long time with the weld-se module.
The API provides an easy way for an application to initialize Weld and use it in a standalone mode.
On initialization Weld SE scans the classpath for bean archives with the <code>beans.xml</code> file, similarly to how it&#8217;s done in the Java EE environment.</p>
</div>
<div class="paragraph">
<p>In this release we are extending the API further.
This is partially inspired by the current discussion in the CDI expert group where a standardized CDI API for Java SE is being proposed as part of <a href="https://issues.jboss.org/browse/CDI-26">CDI-26</a>.</p>
</div>
<div class="paragraph">
<p>The following code snippet shows the new API in action:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">Weld builder = new Weld()&#x000A;    .disableDiscovery()&#x000A;    .packages(Main.class, Utils.class)&#x000A;    .interceptors(TransactionalInterceptor.class)&#x000A;    .property("org.jboss.weld.construction.relaxed", true);&#x000A;&#x000A;try (WeldContainer weld = builder.initialize()) {&#x000A;    MyBean bean = weld.select(MyBean.class).get();&#x000A;    System.out.println(bean.computeResult());&#x000A;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>There are several new things to notice:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>the <code>Weld</code> class is used as a builder to configure Weld before it is initialized</p>
</li>
<li>
<p>automatic scanning can be disabled</p>
</li>
<li>
<p>instead of scanning, classes or packages can be selected explicitly. All classes in those packages will be managed by Weld</p>
</li>
<li>
<p>interceptors, decorators, extensions and <a href="http://docs.jboss.org/weld/reference/3.0.0.Alpha8/en-US/html/configure.html#_weld_configuration">Weld-specific configuration options</a> can be specified using the builder</p>
</li>
<li>
<p><code>WeldContainer</code> now implements <code>AutoCloseable</code> and can therefore be used in a <code>try-with-resources</code> block. At any time that execution gets outside of the code block, the Weld instance is shut down and all managed instances are safely destroyed.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>It is also possible to start multiple independent Weld instances:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">new Weld().disableDiscovery().containerId("one").beanClasses(MyBean.class).initialize();&#x000A;new Weld().disableDiscovery().containerId("two").beanClasses(OtherBean.class).initialize();&#x000A;&#x000A;MyBean bean = WeldContainer.instance("one").select(MyBean.class).get();&#x000A;System.out.println(bean.computeResult());&#x000A;&#x000A;WeldContainer.instance("one").shutdown();&#x000A;WeldContainer.instance("two").shutdown();</code></pre>
</div>
</div>
<div class="paragraph">
<p>Here, two independent <code>WeldContainer</code> instances are initialized.
Each of them is given a unique ID.
The ID can subsequently be used to obtain a <code>WeldContainer</code> reference in a different place of the code.
One possible use-case this enables is for a library or framework (e.g. a testing framework) to use an embedded instance of Weld internally for its own needs (dependency injection, events, extensibility).
This instance would not interfere with the Weld instance used by the application.</p>
</div>
<div class="paragraph">
<p>Obviously, automatic classpath scanning can still be used as before:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">try (WeldContainer weld = new Weld().enableDiscovery().initialize()) {&#x000A;    MyBean bean = weld.select(MyBean.class).get();&#x000A;    System.out.println(bean.computeResult());&#x000A;}</code></pre>
</div>
</div>
<div class="paragraph">
<p><strong>Update:</strong></p>
</div>
<div class="paragraph">
<p>To play with the new API use the following dependency in you Maven project:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;&#x000A;    &lt;groupId&gt;org.jboss.weld.se&lt;/groupId&gt;&#x000A;    &lt;artifactId&gt;weld-se-core&lt;/artifactId&gt;&#x000A;    &lt;version&gt;3.0.0.Alpha8&lt;/version&gt;&#x000A;&lt;/dependency&gt;</code></pre>
</div>
</div>
<div class="paragraph">
<p>Aforementioned classes are from the <code>org.jboss.weld.environment.se</code> package.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_weld_probe_enhancements">Weld Probe Enhancements</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Since the last Alpha releases there were several enhancements to Weld Probe.
If you are not familiar with Weld Probe, check this <a href="http://weld.cdi-spec.org/news/2015/02/05/weld-300Alpha4/">introductory blog post first</a>.</p>
</div>
<div class="paragraph">
<p>A new feature of Probe is that, when the development mode is enabled, it now embeds a tiny information bar directly into the application&#8217;s HTML output.
That makes it easy to navigate to Probe directly from the application anytime.
Furthermore, if invocation tracking is enabled, the information bar helps navigate directly to the invocation tree related to the request that rendered the output.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/blog/probe-bar.png" alt="Weld Probe information bar embedded in application&#8217;s HTML output">
</div>
</div>
<div class="paragraph">
<p><br></p>
</div>
<div class="paragraph">
<p>Additionally, the following Probe improvements were implemented:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>tracked invocations are now grouped into a invocation tree instead of being tracked in isolation</p>
</li>
<li>
<p>a special type of edges is now used in the overview graph to represent a "declared by" relation (when a bean declares a producer method or field)</p>
</li>
<li>
<p>Instance&lt;?&gt; injection points are now treated specially - a resolved bean is show as injection point&#8217;s dependency</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>&#91; <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/package-frame.html">Experimental API documentation</a> &#93;
&#91; <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310891&amp;version=12326881">Release notes</a> &#93;
&#91; <a href="https://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha8">Distribution</a> &#93;
&#91; Patch for Wildfly
(<a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha8/wildfly-8.2.0.Final-weld-3.0.0.Alpha8-patch.zip/download">8.2</a>,
<a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha8/wildfly-9.0.0.Beta2-weld-3.0.0.Alpha8-patch.zip/download">9 Beta</a>)
&#93;</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div class="post">
<h2>
<a href="/news/2015/02/25/weld-300Alpha5/">Weld 3.0.0.Alpha5</a>
</h2>
<div class="news-date news-boxed">
2015-2-25
&nbsp;
<span class="tags">
<i class="fa fa-tags"></i>
<a href="/news/tags/release">release</a>
, 
<a href="/news/tags/cdi2">cdi2</a>
</span>
&nbsp;
<i class="fa fa-pencil"></i>
Jozef Hartinger
</div>
<p></p>
<div class="content">
<div class="paragraph">
<p>Weld 3.0.0.Alpha5, the latest release in the series of CDI 2.0 prototypes, has been released.
The highlights of the release include new Bean builder API and many improvements to Weld Probe.</p>
</div>
<div class="sect1">
<h2 id="_bean_builder_api">Bean Builder API</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The common way for frameworks and libraries to expose their API to applications via CDI is by using producer methods.
An alternative approach is a custom implementation of the <code>javax.enterprise.inject.spi.Bean</code> interface that is registered by a CDI portable extension.
This latter approach gives the extension more control but is also less straightforward.</p>
</div>
<div class="paragraph">
<p>One of the goals of CDI 2.0 is to fill this gap and simplify extension development.
This Weld release comes with a preview of the <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/BeanBuilder.html">Bean builder API</a>.
The API is inspired by Bean builder
<a href="http://deltaspike.apache.org/javadoc/1.2.1/org/apache/deltaspike/core/util/bean/BeanBuilder.html">API provided by DeltaSpike</a>.
In addition, Java 8 lambdas are used in the API to simplify the entire process even further.</p>
</div>
<div class="paragraph">
<p>Here&#8217;s an example of a simple extension that builds and registers a bean:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">void register(@Observes ExperimentalAfterBeanDiscovery event) {&#x000A;    event.addBean()&#x000A;        .addType(Integer.class)&#x000A;        .addQualifier(Random.LITERAL)&#x000A;        .produceWith(() -&gt; new java.util.Random().nextInt(1000));&#x000A;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>That&#8217;s it!
Likewise, it is easy to can define a bean with custom disposal logic using a lambda expression:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="java" class="language-java hljs">void register(@Observes ExperimentalAfterBeanDiscovery event) {&#x000A;    event.addBean()&#x000A;        .addType(Connection.class)&#x000A;        .produceWith(this::newConnection)&#x000A;        .disposeWith(connection -&gt; connection.close());&#x000A;}</code></pre>
</div>
</div>
<div class="paragraph">
<p>See the <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/BeanBuilder.html">BeanBuilder Javadoc</a> for more information.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_event_monitoring_with_probe">Event monitoring with Probe</h2>
<div class="sectionbody">
<div class="paragraph">
<p>We introduced Probe in the <a href="http://weld.cdi-spec.org/news/2015/02/05/weld-300Alpha4/">previous blog post</a>.
This release adds event monitoring view to Probe.
In this view both system and application events are displayed.
The events can be filtered by type and qualifiers.
It is also possible to track which observer methods a particular event was delivered to.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/images/blog/probe-events.png" alt="Weld Probe event monitoring">
</div>
</div>
<div class="sect2">
<h3 id="_further_improvements">Further improvements</h3>
<div class="paragraph">
<p>In addition, there were a couple of minor improvements to Probe, namely:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>better filtering of invocation trees - Probe now searches the whole tree, not just the entry points</p>
</li>
<li>
<p>the context view now displays the conversation context</p>
</li>
<li>
<p>Probe is now more careful and does not try to bind interceptors to classes that are not proxyable</p>
</li>
<li>
<p>all the configuration options for Probe are now <a href="http://docs.jboss.org/weld/reference/3.0.0.Alpha5/en-US/html/configure.html#config-dev-mode">documented</a></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The easiest way to get Probe to run locally is to patch WildFly with a <a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5">Weld patch</a>.
If you&#8217;re not familiar with patching WildFly, check <a href="http://blog.eisele.net/2015/02/playing-with-weld-probe-see-all-of-your.html">Markus&#8217;s tutorial</a>.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_relaxed_construction">Relaxed construction</h2>
<div class="sectionbody">
<div class="paragraph">
<p>CDI requires that beans that are normal-scoped, intercepted or decorated always define a no-argument constructor.
This requirement applies even if the bean already defines an @Inject annotated constructor with parameters.
This is purely a technical requirement implied by how Java allocates class instances.</p>
</div>
<div class="paragraph">
<p>Weld is however able to operate fine even if this requirement is not met.
Weld uses special non-portable JVM APIs that allow it to allocate proxy instances without calling proxy’s constructor.
This mode is non-portable and needs to be <a href="http://docs.jboss.org/weld/reference/3.0.0.Alpha5/en-US/html/configure.html#relaxedConstruction">explicitly enabled using a configuration option</a>.</p>
</div>
<div class="paragraph">
<p>This mode is not new but has been neglected in the past.
For this release we added a bunch of tests for this mode, fixed a lot of bugs and enabled it by default in Weld-SE.
Any feedback on this mode is appreciated.</p>
</div>
<div class="paragraph">
<p>&#91; <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/package-frame.html">Experimental API documentation</a> &#93;
&#91; <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310891&amp;version=12326167">Release notes</a> &#93;
&#91; <a href="https://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5">Distribution</a> &#93;
&#91; Patch for Wildfly
(<a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5/wildfly-8.2.0.Final-weld-3.0.0.Alpha5-patch.zip/download">8.2</a>,
<a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5/wildfly-9.0.0.Alpha1-weld-3.0.0.Alpha5-patch.zip/download">9 Alpha</a>)
&#93;</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div class="post">
<h2>
<a href="/news/2015/02/05/weld-300Alpha4/">Weld 3.0.0.Alpha4</a>
</h2>
<div class="news-date news-boxed">
2015-2-5
&nbsp;
<span class="tags">
<i class="fa fa-tags"></i>
<a href="/news/tags/release">release</a>
, 
<a href="/news/tags/cdi2">cdi2</a>
</span>
&nbsp;
<i class="fa fa-pencil"></i>
Jozef Hartinger
</div>
<p></p>
<div class="content">
<div class="paragraph">
<p>Here we are again with the next Alpha release of Weld 3.
This time there are no additional CDI 2.0 previews.
Instead, this release contains multiple performance improvements, enables <code>@Asynchronous</code>
calls to be implemented simply with CDI interceptors and most importantly, it comes with
<strong>weld-probe</strong>.</p>
</div>
<div class="sect1">
<h2 id="_weld_probe">Weld Probe</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Why isn&#8217;t my field injected?
Why isn&#8217;t my interceptor triggered?
What extensions do third-party libraries register?</p>
</div>
<div class="paragraph">
<p>Have you ever found yourself asking a similar question?
Making Weld developer-friendly and helpful in troubleshooting is our priority.
Yet, similar problems still occur sometimes.</p>
</div>
<div class="paragraph">
<p>But we can do event better! In Alpha4 of Weld 3 we are introducing a new tool called <strong>Weld Probe</strong>.
Probe is a built-in tool that provides a detailed view into internals of a CDI application.
Weld Probe has a web UI and is provided out-of-the-box.</p>
</div>
<div class="paragraph">
<p>Probe makes it easy to inspect:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>beans, their properties such as qualifiers, stereotypes and name</p>
</li>
<li>
<p>a graph of bean dependencies</p>
</li>
<li>
<p>observers and producers declared by beans</p>
</li>
<li>
<p>interceptors and decorators bound to a bean</p>
</li>
<li>
<p>extensions</p>
</li>
<li>
<p>information about current contextual instances</p>
</li>
<li>
<p>tracking of invocations and invocation trees</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>Plus more addons are planned in future.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="https://developer.jboss.org/servlet/JiveServlet/showImage/38-5641-24345/probe_bean_detail.png" alt="Weld Probe Screenshot">
</div>
</div>
<div class="paragraph">
<p>To try probe all that needs to be done is to upgrade to Alpha4, enable the development mode and point your browser to the URL
of your CDI application plus <code>/weld-probe</code> suffix.</p>
</div>
<div class="paragraph">
<p>For more thorough overview of what Probe provides see
<a href="http://goo.gl/ICQrRA">Martin&#8217;s blog post</a> or the
<a href="http://docs.jboss.org/weld/reference/3.0.0.Alpha4/en-US/html/devmode.html#_probe">reference documentation</a>.</p>
</div>
<div class="paragraph">
<p>Bear in mind that Probe is still work in progress and that this early preview may have defects
here and there.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_implementing_asynchronous_using_cdi_interceptor">Implementing @Asynchronous using CDI interceptor</h2>
<div class="sectionbody">
<div class="paragraph">
<p>It <strong>is</strong> possible to implement a substitute for EJB <code>@Asynchronous</code> method calls using CDI interceptors.
Arjan Tijms recently <a href="http://jdevelopment.nl/cdi-based-asynchronous-alternative/">blogged about his solution</a>
A similar one can be found in
<a href="https://github.com/weld/core/blob/master/tests-arquillian/src/test/java/org/jboss/weld/tests/interceptors/thread/async/AsyncInterceptor.java">Weld&#8217;s testsuite</a>.
Long story short: This would not work smoothly until now because of a limitation in Weld. This limitation is now gone in Alpha4.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_performance">Performance</h2>
<div class="sectionbody">
<div class="paragraph">
<p>This release integrates various runtime performance improvements mainly around bean instance construction,
producer and observer method invocation.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_next">Next</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Weld 3.0.0.Alpha5 is planned in 3 weeks time from now, with some more CDI 2.0 previews.
We are going to continue releasing Alpha versions of Weld 3.0 roughly every 3 weeks until
the early draft of CDI 2.0, which should happen sometime in March.
At that point, we&#8217;ll move to Beta releases.</p>
</div>
<div class="paragraph">
<p>In the meantime, we&#8217;d like to hear your feedback on Probe or on Weld 3.0 Alpha releases in general.
Feel free to use our <a href="https://community.jboss.org/en/weld?view=discussions">forums</a> or <a href="http://webchat.freenode.net/?channels=weld-dev">#weld-dev on freenode</a></p>
</div>
<div class="paragraph">
<p>&#91; <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/package-frame.html">Experimental API documentation</a> &#93;
&#91; <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310891&amp;version=12326166">Release notes</a> &#93;
&#91; <a href="https://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha4">Distribution</a> &#93;
&#91; Patch for Wildfly
(<a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha4/wildfly-8.2.0.Final-weld-3.0.0.Alpha4-patch.zip/download">8.2</a>,
<a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha4/wildfly-9.0.0.Alpha1-weld-3.0.0.Alpha4-patch.zip/download">9 Alpha</a>)
&#93;</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div class="pagination-links"><a href="/news/page/13.html" class="previous-link">Previous</a> <a href="/news/" class="page-link">1</a> <a href="/news/page/2.html" class="page-link">2</a> <span class="skip">...</span><a href="/news/page/13.html" class="page-link">13</a> <span class="current-page">14</span> <a href="/news/page/15.html" class="page-link">15</a> <a href="/news/page/16.html" class="page-link">16</a> <a href="/news/page/17.html" class="page-link">17</a> <a href="/news/page/15.html" class="next-link">Next</a> </div>
<hr>
<div>
<a href="http://weld.cdi-spec.org/news.atom">
<i class="fa fa-rss"></i>
Subscribe to Weld news
</a>
</div>

</div>
</div>
</div>
</div>
</div>
<footer>
<div class="row">
<div class="container" id="companyfooter">
<div class="redhatlogo" style="text-align:center;">
<div class="logospacer" style="height:10px;"></div>
<a href="http://www.redhat.com/">
<img src="https://static.jboss.org/theme/images/common/redhat_logo.png">
</a>
</div>
</div>
</div>
</footer>
</body>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" type="text/javascript"></script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount','UA-45187401-1']);
_gaq.push(['_trackPageview']);
(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<script>
  $(document).ready(function() {
    $('#toggle_menu').click(function(){
      $("#mobile_menu").toggle();
    });
  });
</script>
</html>
