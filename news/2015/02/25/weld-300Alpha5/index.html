<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>
      Weld: Weld 3.0.0.Alpha5
    </title>
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <link href="/images/weld_icon_32x.ico" rel="shortcut icon" type="image/x-icon">
    <link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
    <link href="//static.jboss.org/css/tabzilla.css" media="screen" rel="stylesheet" type="text/css">
    <link href="http://weld.cdi-spec.org/stylesheets/styles.css" rel="stylesheet" type="text/css">
    <script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
    <script src="//static.jboss.org/js/_jbossorg-tabzilla.js" type="text/javascript"></script>
    <!--[if lt IE 9]>
      <script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
    <![endif]-->
    <link href="http://weld.cdi-spec.org/news.atom" rel="alternate" type="application/atom+xml">
    <link href="//cdn.jsdelivr.net/highlight.js/8.9.1/styles/default.min.css" rel="stylesheet">
    <script src="//cdn.jsdelivr.net/highlight.js/8.9.1/highlight.min.js" type="text/javascript"></script>
    <script>
      hljs.initHighlightingOnLoad();
    </script>
  </head>
  <body>
    <div class="container-fluid">
      <div class="row">
        <div class="col-md-2 col-sm-3">
          <div class="sidebar-nav">
            <div class="navbar navbar-default" role="navigation">
              <div class="navbar-header">
                <button ="button" class="navbar-toggle" data-target=".sidebar-navbar-collapse" data-toggle="collapse">
                  <span class="sr-only">
                    Toggle navigation
                  </span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                  <span class="icon-bar"></span>
                </button>
                <a ="#" class="visible-xs navbar-brand">
                  <img alt="Weld Logo" src="/images/weld_logo_100x.png">
                </a>
              </div>
              <div class="collapse navbar-collapse sidebar-navbar-collapse">
                <ul class="nav navbar-nav">
                  <li>
                    <a href="/">
                      <i class="fa fa-home"></i>
                      &nbsp;Home
                    </a>
                  </li>
                  <li>
                    <a href="/download">
                      <i class="fa fa-download"></i>
                      &nbsp;Download
                    </a>
                  </li>
                  <li>
                    <a href="/news">
                      <i class="fa fa-edit"></i>
                      &nbsp;News
                    </a>
                  </li>
                  <li>
                    <a href="https://issues.jboss.org/projects/WELD?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page" target="_blank">
                      <i class="fa fa-road"></i>
                      &nbsp;Road Map
                    </a>
                  </li>
                  <li>
                    <a href="/documentation">
                      <i class="fa fa-book"></i>
                      &nbsp;Docs &amp; FAQ
                    </a>
                  </li>
                  <li>
                    <a href="/community">
                      <i class="fa fa-group"></i>
                      &nbsp;Community
                    </a>
                  </li>
                  <li>
                    <a href="http://github.com/weld" target="_blank">
                      <i class="fa fa-github-alt"></i>
                      &nbsp;Source Code
                    </a>
                  </li>
                  <li>
                    <a href="https://issues.jboss.org/browse/WELD#selectedTab=com.atlassian.jira.plugin.system.project%3Asummary-panel" target="_blank">
                      <i class="fa fa-tasks"></i>
                      &nbsp;Bug Tracker
                    </a>
                  </li>
                  <li>
                    <a href="https://twitter.com/jbossweld" target="_blank">
                      <i class="fa fa-twitter"></i>
                      &nbsp;Follow @jbossweld
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </div>
        </div>
        <div class="col-md-10 col-sm-9">
          <div class="row hidden-xs">
            <div class="dropup">
              <div id="ajbossproject">
                A JBoss Project
              </div>
              <a class="tabnav-closed" href="#" id="tab">Red Hat</a>
              <script>
                window.addEventListener('load', function() {renderTabzilla("Weld", "weld", false )}, false);
              </script>
            </div>
          </div>
          <div class="row">
            <div class="col-md-4">
              <a href="/">
                <img alt="Weld Logo" class="hidden-xs weld-home-logo" src="/images/weld_logo_450x.png">
              </a>
            </div>
            <div class="col-md-8">
              <img alt="CDI tagcloud" class="hidden-xs hidden-sm cdi-background" src="/images/CDIbackground.png">
            </div>
          </div>
          <div class="row">
            <div class="col-md-10">
              <div class="post">
                <h1>
                  Weld 3.0.0.Alpha5
                </h1>
                <p style="color: #666;">
                  <strong>2015-2-25: Jozef Hartinger</strong>
                </p>
                <div class="content">
                  <div class="paragraph">
                  <p>Weld 3.0.0.Alpha5, the latest release in the series of CDI 2.0 prototypes, has been released.
                  The highlights of the release include new Bean builder API and many improvements to Weld Probe.</p>
                  </div>
                  <div class="sect1">
                  <h2 id="_bean_builder_api">Bean Builder API</h2>
                  <div class="sectionbody">
                  <div class="paragraph">
                  <p>The common way for frameworks and libraries to expose their API to applications via CDI is by using producer methods.
                  An alternative approach is a custom implementation of the <code>javax.enterprise.inject.spi.Bean</code> interface that is registered by a CDI portable extension.
                  This latter approach gives the extension more control but is also less straightforward.</p>
                  </div>
                  <div class="paragraph">
                  <p>One of the goals of CDI 2.0 is to fill this gap and simplify extension development.
                  This Weld release comes with a preview of the <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/BeanBuilder.html">Bean builder API</a>.
                  The API is inspired by Bean builder
                  <a href="http://deltaspike.apache.org/javadoc/1.2.1/org/apache/deltaspike/core/util/bean/BeanBuilder.html">API provided by DeltaSpike</a>.
                  In addition, Java 8 lambdas are used in the API to simplify the entire process even further.</p>
                  </div>
                  <div class="paragraph">
                  <p>Here&#8217;s an example of a simple extension that builds and registers a bean:</p>
                  </div>
                  <div class="listingblock">
                  <div class="content">
                  <pre class="highlightjs highlight"><code class="language-java" data-lang="java">void register(@Observes ExperimentalAfterBeanDiscovery event) {&#x000A;    event.addBean()&#x000A;        .addType(Integer.class)&#x000A;        .addQualifier(Random.LITERAL)&#x000A;        .produceWith(() -&gt; new java.util.Random().nextInt(1000));&#x000A;}</code></pre>
                  </div>
                  </div>
                  <div class="paragraph">
                  <p>That&#8217;s it!
                  Likewise, it is easy to can define a bean with custom disposal logic using a lambda expression:</p>
                  </div>
                  <div class="listingblock">
                  <div class="content">
                  <pre class="highlightjs highlight"><code class="language-java" data-lang="java">void register(@Observes ExperimentalAfterBeanDiscovery event) {&#x000A;    event.addBean()&#x000A;        .addType(Connection.class)&#x000A;        .produceWith(this::newConnection)&#x000A;        .disposeWith(connection -&gt; connection.close());&#x000A;}</code></pre>
                  </div>
                  </div>
                  <div class="paragraph">
                  <p>See the <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/BeanBuilder.html">BeanBuilder Javadoc</a> for more information.</p>
                  </div>
                  </div>
                  </div>
                  <div class="sect1">
                  <h2 id="_event_monitoring_with_probe">Event monitoring with Probe</h2>
                  <div class="sectionbody">
                  <div class="paragraph">
                  <p>We introduced Probe in the <a href="http://weld.cdi-spec.org/news/2015/02/05/weld-300Alpha4/">previous blog post</a>.
                  This release adds event monitoring view to Probe.
                  In this view both system and application events are displayed.
                  The events can be filtered by type and qualifiers.
                  It is also possible to track which observer methods a particular event was delivered to.</p>
                  </div>
                  <div class="imageblock">
                  <div class="content">
                  <img src="/images/blog/probe-events.png" alt="Weld Probe event monitoring">
                  </div>
                  </div>
                  <div class="sect2">
                  <h3 id="_further_improvements">Further improvements</h3>
                  <div class="paragraph">
                  <p>In addition, there were a couple of minor improvements to Probe, namely:</p>
                  </div>
                  <div class="ulist">
                  <ul>
                  <li>
                  <p>better filtering of invocation trees - Probe now searches the whole tree, not just the entry points</p>
                  </li>
                  <li>
                  <p>the context view now displays the conversation context</p>
                  </li>
                  <li>
                  <p>Probe is now more careful and does not try to bind interceptors to classes that are not proxyable</p>
                  </li>
                  <li>
                  <p>all the configuration options for Probe are now <a href="http://docs.jboss.org/weld/reference/3.0.0.Alpha5/en-US/html/configure.html#config-dev-mode">documented</a></p>
                  </li>
                  </ul>
                  </div>
                  <div class="paragraph">
                  <p>If you haven&#8217;t tried Probe yet check this <a href="http://probe-weld.itos.redhat.com/weld-numberguess/weld-probe#/events">demo running on OpenShift</a>.
                  The easiest way to get Probe to run locally is to patch WildFly with a <a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5">Weld patch</a>.
                  If you&#8217;re not familiar with patching WildFly, check <a href="http://blog.eisele.net/2015/02/playing-with-weld-probe-see-all-of-your.html">Markus&#8217;s tutorial</a>.</p>
                  </div>
                  </div>
                  </div>
                  </div>
                  <div class="sect1">
                  <h2 id="_relaxed_construction">Relaxed construction</h2>
                  <div class="sectionbody">
                  <div class="paragraph">
                  <p>CDI requires that beans that are normal-scoped, intercepted or decorated always define a no-argument constructor.
                  This requirement applies even if the bean already defines an @Inject annotated constructor with parameters.
                  This is purely a technical requirement implied by how Java allocates class instances.</p>
                  </div>
                  <div class="paragraph">
                  <p>Weld is however able to operate fine even if this requirement is not met.
                  Weld uses special non-portable JVM APIs that allow it to allocate proxy instances without calling proxyâ€™s constructor.
                  This mode is non-portable and needs to be <a href="http://docs.jboss.org/weld/reference/3.0.0.Alpha5/en-US/html/configure.html#relaxedConstruction">explicitly enabled using a configuration option</a>.</p>
                  </div>
                  <div class="paragraph">
                  <p>This mode is not new but has been neglected in the past.
                  For this release we added a bunch of tests for this mode, fixed a lot of bugs and enabled it by default in Weld-SE.
                  Any feedback on this mode is appreciated.</p>
                  </div>
                  <div class="paragraph">
                  <p>&#91; <a href="http://docs.jboss.org/weld/javadoc/3.0/weld-api/org/jboss/weld/experimental/package-frame.html">Experimental API documentation</a> &#93;
                  &#91; <a href="https://issues.jboss.org/secure/ReleaseNote.jspa?projectId=12310891&amp;version=12326167">Release notes</a> &#93;
                  &#91; <a href="https://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5">Distribution</a> &#93;
                  &#91; Patch for Wildfly
                  (<a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5/wildfly-8.2.0.Final-weld-3.0.0.Alpha5-patch.zip/download">8.2</a>,
                  <a href="http://sourceforge.net/projects/jboss/files/Weld/3.0.0.Alpha5/wildfly-9.0.0.Alpha1-weld-3.0.0.Alpha5-patch.zip/download">9 Alpha</a>)
                  &#93;</p>
                  </div>
                  </div>
                  </div>
                </div>
                
                            <div id="disqus_thread"></div>
                            <script type="text/javascript">
                            var disqus_shortname = 'weld-cdi';
                            var disqus_url = "http://weld.cdi-spec.org/news/2015/02/25/weld-300Alpha5/";
                            var disqus_developer = null;
                            var disqus_identifier = "51cbd25aeecf9765b52b8aa188d4389249c30b52";
                            (function() {
                              var dsq = document.createElement("script"); dsq.type = "text/javascript"; dsq.async = true;
                              dsq.src = "http://weld-cdi.disqus.com/embed.js";
                              (document.getElementsByTagName("head")[0] || document.getElementsByTagName("body")[0]).appendChild(dsq);
                            })();
                            </script>
                            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript=weld-cdi">comments powered by Disqus.</a></noscript>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
    <footer>
      <div class="row">
        <div class="container" id="companyfooter">
          <div class="redhatlogo" style="text-align:center;">
            <div class="logospacer" style="height:10px;"></div>
            <a href="http://www.redhat.com/">
              <img src="http://static.jboss.org/theme/images/common/redhat_logo.png">
            </a>
          </div>
        </div>
      </div>
    </footer>
  </body>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" type="text/javascript"></script>
  <script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount','UA-45187401-1']);
  _gaq.push(['_trackPageview']);
  (function() {
   var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
   ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
   var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
  </script>
  <script>
    $(document).ready(function() {
      $('#toggle_menu').click(function(){
        $("#mobile_menu").toggle();
      });
    });
  </script>
</html>
