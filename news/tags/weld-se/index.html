<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>
Weld: News - tagged as &quot;weld-se&quot;
</title>
<meta content="width=device-width, initial-scale=1.0" name="viewport">
<meta content="Latest news about Weld." name="description">
<link href="/images/weld_icon_32x.ico" rel="shortcut icon" type="image/x-icon">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet" type="text/css">
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.4.0/css/font-awesome.min.css" rel="stylesheet" type="text/css">
<link href="//static.jboss.org/css/tabzilla.css" media="screen" rel="stylesheet" type="text/css">
<link href="https://weld.cdi-spec.org/stylesheets/styles.css" rel="stylesheet" type="text/css">
<script src="//static.jboss.org/theme/js/libs/jquery/jquery-1.9.1.min.js" type="text/javascript"></script>
<script src="//static.jboss.org/js/_jbossorg-tabzilla.js" type="text/javascript"></script>
<!--[if lt IE 9]>
<script src="//html5shim.googlecode.com/svn/trunk/html5.js" type="text/javascript"></script>
<![endif]-->
<link href="https://weld.cdi-spec.org/news.atom" rel="alternate" type="application/atom+xml">
<link href="//cdn.jsdelivr.net/highlight.js/8.9.1/styles/hybrid.min.css" rel="stylesheet">
<script src="//cdn.jsdelivr.net/highlight.js/8.9.1/highlight.min.js" type="text/javascript"></script>
<script>
hljs.initHighlightingOnLoad();
</script>
</head>
<body>
<div class="container-fluid">
<div class="row">
<div class="col-md-2 col-sm-3">
<div class="sidebar-nav">
<div class="navbar navbar-default" role="navigation">
<div class="navbar-header">
<button ="button" class="navbar-toggle" data-target=".sidebar-navbar-collapse" data-toggle="collapse">
<span class="sr-only">
Toggle navigation
</span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
<span class="icon-bar"></span>
</button>
<a ="#" class="visible-xs navbar-brand">
<img alt="Weld Logo" src="/images/weld_logo_100x.png">
</a>
</div>
<div class="collapse navbar-collapse sidebar-navbar-collapse">
<ul class="nav navbar-nav">
<li>
<a href="/">
<i class="fa fa-home"></i>
&nbsp;Home
</a>
</li>
<li>
<a href="/download">
<i class="fa fa-download"></i>
&nbsp;Download
</a>
</li>
<li>
<a href="/news">
<i class="fa fa-newspaper-o"></i>
&nbsp;News
</a>
</li>
<li>
<a href="https://issues.jboss.org/projects/WELD?selectedItem=com.atlassian.jira.jira-projects-plugin:release-page" target="_blank">
<i class="fa fa-road"></i>
&nbsp;Road Map
</a>
</li>
<li>
<a href="/documentation">
<i class="fa fa-book"></i>
&nbsp;Docs &amp; FAQ
</a>
</li>
<li>
<a href="/news/tags/tips">
<i class="fa fa-lightbulb-o"></i>
&nbsp;Tips and Tricks
</a>
</li>
<li>
<a href="/community">
<i class="fa fa-group"></i>
&nbsp;Community
</a>
</li>
<li>
<a href="http://github.com/weld" target="_blank">
<i class="fa fa-github-alt"></i>
&nbsp;Source Code
</a>
</li>
<li>
<a href="https://issues.jboss.org/browse/WELD#selectedTab=com.atlassian.jira.plugin.system.project%3Asummary-panel" target="_blank">
<i class="fa fa-tasks"></i>
&nbsp;Bug Tracker
</a>
</li>
<li>
<a href="https://twitter.com/jbossweld" target="_blank">
<i class="fa fa-twitter"></i>
&nbsp;Follow @jbossweld
</a>
</li>
</ul>
</div>
</div>
</div>
</div>
<div class="col-md-10 col-sm-9">
<div class="row hidden-xs">
<div class="dropup">
<div id="ajbossproject">
A JBoss Project
</div>
<a class="tabnav-closed" href="#" id="tab">Red Hat</a>
<script>
window.addEventListener('load', function() {renderTabzilla("Weld", "weld", false )}, false);
</script>
</div>
</div>
<div class="row">
<div class="col-md-4">
<a href="/">
<img alt="Weld Logo" class="hidden-xs weld-home-logo" src="/images/weld_logo_450x.png">
</a>
</div>
<div class="col-md-8">
<img alt="CDI tagcloud" class="hidden-xs hidden-sm cdi-background" src="/images/CDIbackground.png">
</div>
</div>
<div class="row content-wrapper">
<div class="col-md-12">
<h1>
News - tagged as &quot;weld-se&quot;
<a href="http://weld.cdi-spec.org/news.atom">
<i class="fa fa-rss"></i>
</a>
</h1>
<div class="post">
<h2>
<a href="/news/2017/12/19/weld-meets-junit5/">Weld meets JUnit 5</a>
</h2>
<div class="news-date news-boxed">
2017-12-19
&nbsp;
<span class="tags">
<i class="fa fa-tags"></i>
<a href="/news/tags/junit">junit</a>
, 
<a href="/news/tags/testing">testing</a>
, 
<a href="/news/tags/weld-se">weld-se</a>
</span>
&nbsp;
<i class="fa fa-pencil"></i>
Matej Novotny
</div>
<p></p>
<div class="content">
<div id="toc" class="toc">
<div id="toctitle" class="title">Contents</div>
<ul class="sectlevel1">
<li><a href="#_gav_coordinates">GAV Coordinates</a></li>
<li><a href="#_first_steps">First Steps</a></li>
<li><a href="#_dude_where_is_my_container">Dude, Where Is My Container?</a></li>
<li><a href="#_help_i_am_stuck_with_junit_4">Help, I Am Stuck With JUnit 4</a></li>
<li><a href="#_what_if_i_would_like_to">What If I Would Like To&#8230;&#8203;</a></li>
</ul>
</div>
<div class="paragraph">
<p>In this article I want to bring <a href="https://github.com/weld/weld-junit" target="_blank" rel="noopener">weld-junit</a> into light.
You might have heard about or, better still, used our extension for JUnit 4 which has been around for some time now.
But after getting ourselves acquainted with JUnit 5, we decided we should create another one for JUnit 5.
In the sections below I will try to introduce the basic usage and ideas behind it, for more in depth information, you can glance the <a href="https://github.com/weld/weld-junit/blob/master/junit5/README.md">readme file</a> residing directly in the repository.</p>
</div>
<div class="sect1">
<h2 id="_gav_coordinates">GAV Coordinates</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Here are group and artifact IDs you need to grab the artifact for Maven projects:</p>
</div>
<div class="listingblock">
<div class="content">
<pre class="highlightjs highlight"><code data-lang="xml" class="language-xml hljs">&lt;dependency&gt;&#x000A;  &lt;groupId&gt;org.jboss.weld&lt;/groupId&gt;&#x000A;  &lt;artifactId&gt;weld-junit-parent&lt;/artifactId&gt;&#x000A;  &lt;version&gt;${weld.junit.version}&lt;/version&gt;&#x000A;&lt;/dependency&gt;</code></pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_first_steps">First Steps</h2>
<div class="sectionbody">
<div class="paragraph">
<p>You can use the extension as you would any other in JUnit 5, via <code>@ExtendWith</code> from JUnit library along with the name of our extension - <code>org.jboss.weld.junit5.WeldJunit5Extension</code>.
Alternatively, there is a shorter annotation <code>@org.jboss.weld.junit5.EnableWeld</code>.
Both of these can be used on class and method level.</p>
</div>
<div class="paragraph">
<p>Hence your test could look like this:</p>
</div>
<div class="paragraph">
<p>[ source, java ]</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@EnableWeld&#x000A;public class InjectionWithWeldTest {&#x000A;&#x000A;  @Inject&#x000A;  BarBean beanAsField;&#x000A;&#x000A;  @Test&#x000A;  public void testThatItWorks(FooBean beanAsParam) {&#x000A;    assertNotNull(beanAsParam);&#x000A;    beanAsParam.ping();&#x000A;    assertNotNull(beanAsField);&#x000A;    beanAsField.ping();&#x000A;  }&#x000A;&#x000A;}</pre>
</div>
</div>
<div class="paragraph">
<p>Behind the scenes, Weld will bootstrap SE container for each test container invocation and tear it down afterwards (works for both, per-method and per-class lifecycle).
As you might have guessed, Weld will also automatically inject into any fields within the test class which you annotated with <code>@Inject</code>.
Furthermore, it will attempt to resolve parameters in your test methods in very much the same way.
But beware, by default Weld will only scan classes from within the test package!
With this in mind, you can play around with beans to your liking.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_dude_where_is_my_container">Dude, Where Is My Container?</h2>
<div class="sectionbody">
<div class="paragraph">
<p>Good point, when working with Weld SE you normally have the power to customize container bootstrap and, once running, to query it for beans, fire events and so on.
And you shall retain that right!</p>
</div>
<div class="paragraph">
<p>Only you are going to need a public field with type <code>org.jboss.weld.junit5.WeldInitiator</code> which you annotate with <code>@org.jboss.weld.junit5.WeldSetup</code>.
This class has a bunch of static method which will allow you to customize the boostrap and it also works as a handle to grasp the <code>WeldContainer</code> running below.</p>
</div>
<div class="paragraph">
<p>Too much talk, not enough code, so here we go:</p>
</div>
<div class="paragraph">
<p>[ source, java ]</p>
</div>
<div class="listingblock">
<div class="content">
<pre>@ExtendWith(WeldJUnit5Extension.class)&#x000A;public class WeldJUnit5CustomizedTest {&#x000A;&#x000A;  @WeldSetup&#x000A;  public WeldInitiator weld = WeldInitiator.of(WeldInitiator.createWeld()&#x000A;                                           .alternatives(FooAlternative.class)&#x000A;                                           .beanClasses(Foo.class, FooAlternative.class)&#x000A;                                           .enableInterceptors(MyInterceptor.class));&#x000A;&#x000A;  @Inject&#x000A;  Foo bean; // this will be FooAlternative in the end&#x000A;&#x000A;  @Test&#x000A;  public void testWeldContainerUsage() {&#x000A;    weld.event().select(MyPayload.class).fire(new MyPayload());&#x000A;    weld.select(Foo.class).isResolvable();&#x000A;  }&#x000A;}</pre>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_help_i_am_stuck_with_junit_4">Help, I Am Stuck With JUnit 4</h2>
<div class="sectionbody">
<div class="paragraph">
<p>No problems, we got you covered, check out our <a href="https://github.com/weld/weld-junit/blob/master/junit4/README.md">JUnit 4 extension</a>.</p>
</div>
<div class="paragraph">
<p>They are both very similar and easy to master.
The only notable difference is that in JUnit 4 you always need the initiator class - <code>org.jboss.weld.junit4.WeldInitiator</code>.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="_what_if_i_would_like_to">What If I Would Like To&#8230;&#8203;</h2>
<div class="sectionbody">
<div class="paragraph">
<p>If you&#8217;re stuck and need a helping hand, we are listening on the usual channels - mailing list, Stack Overflow, Gitter, IRC, GitHub.</p>
</div>
<div class="paragraph">
<p>It might also be the case that we forgot about something quite important, so don&#8217;t hesitate to reach to us through those channels, or open a GitHub issue straight away.
We are happy for any kind of feedback we can get.</p>
</div>
</div>
</div>
</div>
<hr>
</div>
<div class="pagination-links"><span class="current-page">1</span> </div>
<hr>
<div>
<a href="http://weld.cdi-spec.org/news.atom">
<i class="fa fa-rss"></i>
Subscribe to Weld news
</a>
</div>

</div>
</div>
</div>
</div>
</div>
<footer>
<div class="row">
<div class="container" id="companyfooter">
<div class="redhatlogo" style="text-align:center;">
<div class="logospacer" style="height:10px;"></div>
<a href="http://www.redhat.com/">
<img src="https://static.jboss.org/theme/images/common/redhat_logo.png">
</a>
</div>
</div>
</div>
</footer>
</body>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" type="text/javascript"></script>
<script type="text/javascript">
var _gaq = _gaq || [];
_gaq.push(['_setAccount','UA-45187401-1']);
_gaq.push(['_trackPageview']);
(function() {
 var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
 ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
 var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
})();
</script>

<script>
  $(document).ready(function() {
    $('#toggle_menu').click(function(){
      $("#mobile_menu").toggle();
    });
  });
</script>
</html>
